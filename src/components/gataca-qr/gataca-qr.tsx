import { Component, Prop, h, State, Method , Event, EventEmitter} from '@stencil/core';
import qrcode from 'qrcode-generator';

import {checkMobile, base64UrlEncode, RESULT_STATUS} from '../../utils/utils';


const DEEP_LINK_PREFIX = "https://gataca.page.link/?apn=com.gatacaapp&ibi=com.gataca.wallet&link="

//Default values
const DEFAULT_SESSION_TIMEOUT = 180 //3mins
const DEFAULT_POLLING_FREQ = 3 // 3 s
const DEFAULT_QR_FUNCTION = "scan" // 3 s
const DEFAULT_CALLBACK_SERVER = "https://connect.gatacaid.com:9090" // Gataca Connect SaaS
const DEFAULT_SESSION_ENDPOINT = "https://" + window.location.hostname + ":9090/admin/v1/login/gataca" // Should never be used, but will be matching the examples provided
const DEFAULT_GENERATION_ENDPOINT = "https://" + window.location.hostname + ":9090/admin/v1/login/request" // Should never be used, but will be matching the examples provided


const GATACA_LOGO_BASE64 = 'data:image/png;base64,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'
@Component({
  tag: 'gataca-qr',
  styleUrl: 'gataca-qr.css',
  shadow: true
})
export class GatacaQR {
  /**
  * ***Mandatory***
  * Callback fired upon session correctly verified
  * If not set, session validation wouldn't trigger any action
  * The session data and a possible token will be sent as parameters to the callback
  */
  @Prop() successCallback: (data ?:any, token ?:string) => void = undefined;

  /**
  * _[Optional]_
  * Decide if to show it as a button to display the QR
  * Or display directly the QR. Default: true (display button)
  */
  @Prop() asButton: boolean = true;

  /**
  * _[Optional]_
  * Decide if scanning the credential as a verifier to request credentials
  * or as an issuer too issue credentials.
  * Options: scan (default) | credential 
  */
 @Prop() qrRole: string = DEFAULT_QR_FUNCTION;

  /**
  * ***Mandatory***
  * Callback fired upon session expired or invalid
  * If not set, session error would not be handled
  * An error containing information will be passed as parameter
  */
  @Prop() errorCallback: (error ?:Error) => void = undefined;

  /**
  * ***Mandatory***
  * Connect Server where the wallet will send the data
  */
  @Prop() callbackServer: string = DEFAULT_CALLBACK_SERVER;

  /**
  * _[Optional]_
  * Check status function to query the current status of the session
  * If not set, it would fallback to the session Endpoint property.
  */
  @Prop() checkStatus?: (id ?: string) => Promise<RESULT_STATUS> = undefined;

  /**
  * _[Optional]_
  * EndpointURL to fetch data for the status. The endpoint URL will send a GET request with the session id on a parameter; concatenated to this string.
  * It can be used if your API fulfills the requirement. If not, use the checkStatus property.
  * If not set, it would use a default endpoint to the same window URL under the path /auth
  */
  @Prop() sessionEndpoint?: string = DEFAULT_SESSION_ENDPOINT;

  /**
   * _[Optional]_
   * Generated session Id, which is required. Without session Id, the QR will not work.
   * If the property is unset, it will check for an _id_ or _sessionId_ query parameter on the current URL.
   * If there is no sessionId, it will fallback to the createSession method to generate a new Session.
   */
  @Prop() sessionId?: string = undefined;

  /**
   * _[Optional]_
   * Create session function to generate a new Session
   * If the property is unset, it will fallback to the generation Endpoint property.
   */
  @Prop() createSession?: () => Promise<string> = undefined;

  /**
   * _[Optional]_
   * Session Generation URL to create a new Session.
   * It will expect to receive the session Id from the response header 'X-Connect-Id'.
   * If not set, it would use a default endpoint to the same window URL under the path /auth
   */
  @Prop() generationEndpoint?: string = DEFAULT_GENERATION_ENDPOINT;

  /**
   * _[Optional]_
   * Maximum time window to display the session
   */
  @Prop() sessionTimeout?: number = DEFAULT_SESSION_TIMEOUT;

  /**
   * _[Optional]_
   * Frequency in seconds to check if the session has been validated
   */
  @Prop() pollingFrequency?: number = DEFAULT_POLLING_FREQ;

  /**
   * _[Optional]_
   * Display a link containing a dynamic link to invoke the wallet if closed
   */
  @Prop() dynamicLink?: boolean = true;

  
  @State() open: boolean = false;

  @State() loaded: boolean = false;

  @State() connectToken :string =undefined;

  @State() loginToken :string = undefined;
  @State() sessionData :any = undefined;

  /**
   * GatacaLoginCompleted event, triggered with session data upon login success
   */
  @Event({
    eventName: 'gatacaLoginCompleted',
    composed: true,
    cancelable: true,
    bubbles: true,
  }) gatacaLoginCompleted: EventEmitter;

  /**
   * GatacaLoginFailed event, triggered with error upon login failure
   */
  @Event({
    eventName: 'gatacaLoginFailed',
    composed: true,
    cancelable: true,
    bubbles: true,
  }) gatacaLoginFailed: EventEmitter;


  /**
   * Force manually the display of a QR
   */
  @Method()
  async display() :Promise<void>{
    await this.getSessionId();
    this.poll().then((data :any) => {
                    this.gatacaLoginCompleted.emit(data);
                    this.successCallback(data, this.loginToken);
                }).catch((error :Error) => {
                  this.gatacaLoginFailed.emit(error);
                  this.errorCallback(error);
                });
    if (checkMobile() && this.dynamicLink) {
      window.location.href = this.getLink();
    } else {
      this.open = true;
    }
  }

  /**
   * Stop manually an ongoing session
   */
  @Method()
  async stop() :Promise<void>{
    this.open = false;
    this.loginToken = null;
    this.sessionData = null;
    if (this.loaded){
      this.sessionId = null;
    }
  }

  /**
   * Retrieve manually a possible token retrieved upon login on the Header 'token'
   */
  @Method()
  async getToken() {
    return this.loginToken ? Promise.resolve(this.loginToken) : Promise.reject(new Error("No successful login"))
  }

  /**
   * Retrieve manually the session data on a successful login
   */
  @Method()
  async getSessionData() {
    return this.sessionData ? Promise.resolve(this.sessionData) : Promise.reject(new Error("No successful login"))
  }

  async getSessionId(): Promise<string> {
    if (this.sessionId){
      return this.sessionId
    }
    const urlParams = new URLSearchParams(window.location.search);
    const id = urlParams.get('id') || urlParams.get('sessionId');
    if (id) {
      this.sessionId = id;
      return id
    }
    this.loaded = true;
    if (this.createSession){
      this.sessionId = await this.createSession()
      return this.sessionId
    }
    this.sessionId = await this.createSessionDefault()
    return this.sessionId;
  }


  getLink(): string{
    let link = 'https://gataca.page.link/' + this.qrRole + '?';
    link += this.qrRole === DEFAULT_QR_FUNCTION ? "session=" + this.sessionId : "process=" + this.sessionId 
    link += "&callback=" + base64UrlEncode(encodeURIComponent(this.callbackServer));
    link = encodeURIComponent(link);
    return this.dynamicLink ? DEEP_LINK_PREFIX + link : link;
  }

  renderButton() {
    return <button class="gatacaButton" onClick={(_) => this.display()}><img src={GATACA_LOGO_BASE64} class="buttonImg" /> Log in with Gataca</button>;
  }

  async checkSessionDefault(id: string): Promise<RESULT_STATUS> {
    let endpoint = this.sessionEndpoint || DEFAULT_SESSION_ENDPOINT;
    let response = await fetch(
      endpoint,
      {
          method: "POST",
          headers: {
              'Content-Type': 'application/json',
              'session_id' : id,
              'connect_token': this.connectToken,
              'tenant': 'Admin',
          },
          body: "{}"
      }
    );
    switch (response.status){
      case 200:
        this.loginToken = response.headers.get("token");
        this.sessionData = (await response.json()).data;
        return RESULT_STATUS.SUCCESS;
      case 428:
        return RESULT_STATUS.ONGOING;
      default:
        return RESULT_STATUS.FAILED
    } 
  }

  async createSessionDefault(): Promise< string>{
    let endpoint = this.generationEndpoint || DEFAULT_GENERATION_ENDPOINT;
    let response = await fetch(endpoint);
    let data = await response.json();
    this.connectToken = data.connect_token;
    console.log("ConnectToken", "SET", this.connectToken, "EXPECTED", data.connect_token)
    return data.session_id
  }

  async poll(){
    let endTime = new Date().getTime() + (this.sessionTimeout || DEFAULT_SESSION_TIMEOUT) * 1000;
    let interval = (this.pollingFrequency || DEFAULT_POLLING_FREQ) * 1000;
    let checkFunc = async (component: GatacaQR): Promise<RESULT_STATUS> => {
      let id = await component.getSessionId();
      return component.checkStatus ? component.checkStatus(id) : component.checkSessionDefault(id);
    }
    let component = this;
    let checkCondition = async function (resolve, reject) {
      // If the condition is met, we're done! 
      let result = await checkFunc(component);
      console.log("Checking condition: ", result)
      if (result === RESULT_STATUS.SUCCESS) {
        console.log("Resolve")
        resolve(component.sessionData);
      } 
      // If the condition isn't met but the timeout hasn't elapsed, go again
      else if (result === RESULT_STATUS.ONGOING && new Date().getTime() < endTime) {
        console.log("Retry in ", interval)
        setTimeout(checkCondition, interval, resolve, reject);
      }
      // Didn't match and too much time, reject!
      else {
        await component.stop()
        reject(new Error('Session validation timed out for after' + component.sessionTimeout || DEFAULT_SESSION_TIMEOUT + ' s.'));
      }
    };
    return new Promise(checkCondition);
  }

  displayQR() {
    let typeNumber = 0 as TypeNumber;
    let errorCorrectionLevel = 'H' as ErrorCorrectionLevel;
    let qr = qrcode(typeNumber, errorCorrectionLevel);
    let link = this.getLink();
    console.log("LINK", link)
    qr.addData(link);
    qr.make();
    return <div>
      <slot name="title"></slot>
      <div class="qr-container" innerHTML={this.dynamicLink? qr.createSvgTag(8, 25) : qr.createSvgTag(6, 25)} />
      <slot name="description"></slot>
    </div>
  }

  renderModal() {
    return <div class={'overlay ' + (this.open ? 'is-visible' : '') + ' '} onClick={(_) => this.stop()}>
      <div class="modal-window" onClick={(event) => { event.stopPropagation() }}>
        <div class="modal-window__content" >
          {this.displayQR()}
        </div>
      </div>
    </div>;
  }

  renderAsButton(){
    return <div class="buttonContainer">
      {this.renderButton()}
      {this.open && this.renderModal()}
    </div>;
  }

  render() {
    return <div class="buttonContainer">
      {this.asButton ? this.renderAsButton() : this.renderModal()} 
    </div>;
  }
}
